<% title "#{@student.name}" %>
<% title_html do %>
	<% if @student.blocked %>
		<div class="alert alert-warning alert-dismissible fitted" role="alert" id="student_blocked_message">
			<strong>This student is blocked from accessing this record.</strong>
			<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
		</div>
	<% end %>
	<%= render partial: "header" %>
<% end %>

<div class="card">
  <div class="card-header">
		<h5 class="trivial">Created by <%= @student.created_by.name%>
			<% if can?(:login_as, :student) && is_controller_and_action?("students", "show") %>
			- <%= link_to "Login as this student", login_as_student_path(id: @student.id) %>
			<% end %>
		</h5>
  </div>
  <div class="card-body">
		<div class="row">
			<div class="col-sm-12 col-lg-6">
				<div class="row">
					<div class="col-4">Username</div>
					<div class="col fw-bold"><%= @student.username%></div>
				</div>
				<div class="row">
					<div class="col-4">Email</div>
					<div class="col fw-bold"><%= @student.email%></div>
				</div>
				<div class="row">
					<div class="col-4">Invitation</div>
					<div class="col fw-bold">
						<% if @student.invitation_sent_at.nil? %>
							<%= link_to_if AppSettings.email_welcome_allow, "Send invitation email", send_invite_student_path(@student) %>
						<% else %>
							Sent on <%= @student.invitation_sent_at.strftime("%B %d, %Y")%>
							<span class="soft weak">(<%= link_to_if AppSettings.email_welcome_allow, "Send Again", send_invite_student_path(@student), class: "soft weak"%>)</span>
						<% end %>
					</div>
				</div>

			</div>
			<div class="col-lg-2 d-none d-lg-block">
			</div>			
			<div class="col-sm-12 col-lg-4">
				<div class="row">
					<div class="col-4">SISID</div>
					<div class="col fw-bold"><%= @student.sisid %></div>
				</div>
				<div class="row">
					<div class="col-4">Joined on</div>
					<div class="col fw-bold"><%= @student.created_at.strftime("%B %d, %Y")%></div>
				</div>

			</div>
		</div>



  </div>
</div>

<div>
	<section class="theses pt-4">

		<% if @current_theses.size > 0 %>

			<h3 class="heading">Current <%= "thesis".pluralize(@current_theses.count )%></h3>
			<% @current_theses.each do |thesis| %>
				<%= render partial: thesis %>
			<% end %>

		<% end %>

		<% if @available_theses.size > 0 %>
			<h3 class='heading clear'>Available <%= "thesis".pluralize(@available_theses.count )%></h3>

			<% @available_theses.each do |record| %>
				<table class="thesis not_started">
					<tr>
						<td>
							<h5><%= record.program %></h5>
							<h3><%= record.title %></h3>


						</td>
						<td width="18%">
							<a href="<%= new_student_thesis_path(@student, gem_record: record.id) %>" class="btn btn-success btn-small float-end">
								<i class="fa fa-plus"></i> Start this thesis
							</a>
						</td>
					</tr>
				</table>
			<% end %>
		<% end %>

	</section>
</div>
